cmake_mini_mum_required(VERSION 2.6.4)
project(LibBase)

include_directories(
        ./include
        ./src)

aux_source_directory(./src SOURCE_FILES)

set(DEBUG 0)

if(DEBUG EQUAL 1)
   set(CMAKE_BUILD_TYPE "Debug")
   set(CMAKE_CXX_FLAGS_DEBUG "-g -00 -static-libgcc -static-libstdc++")
   set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ./lib)
   set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ./bin)
   link_directories(./src)
else()
   set(CMAKE_BUILD_TYPE "Release")
   set(CMAKE_CXX_FLAGS_DEBUG "-03 -static-libgcc -static-libstdc++ -finline-limit=1000 -DNDEBUG")
   set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ./lib)
   set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ./bin)
   link_directories(./src)
endif()

add_executable(libbase ${SOURCE_FILES})

target_link_libraries(libbase pthread z rt z)

add_library(baselib SHARED ${SOURCE_FILES} ${HEADER})

add_definitions(-Wall -Wno-format -Wno-invalid-offsetof -Wno-unknown-pragmas -fPIC -std=c++11)
